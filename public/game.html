<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tower Attack - Simulation</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="app">
    <span class="education-text">education ∫∑∏√∂∇∞≠≤≥±×÷∈∉⊂⊃∪∩∧∨¬∀∃ℝℂℕℤℚ 
    π e φ θ α β γ δ ε λ μ ω Ω Σ Π Δ Φ Ψ ∮∬∭ ∂²/∂x² ∇² ℏ ∞ 
    1234567890 +-×÷=≈≠<>≤≥ ()[]{}|‖ ∫₀^∞ ∑ₙ₌₁^∞ ∏ᵢ₌₁ⁿ 
    x² x³ xⁿ √x ∛x ⁿ√x log₂ logₑ ln lg sin cos tan cot sec csc 
    sinh cosh tanh arcsin arccos arctan f'(x) f''(x) f⁽ⁿ⁾(x) 
    lim sup inf max min arg det Tr dim ker Im Re ∂/∂x d/dx 
    A×B A⊗B A⊕B A∩B A∪B A\B |A| ‖A‖ A⁻¹ Aᵀ A* ⟨x,y⟩ [x,y] 
    ∀x∈ℝ ∃y∈ℕ ∄z∈ℚ x∈S x∉S S⊂T S⊃T S⊆T S⊇T ∅ ℘(S)</span>
    <!-- Top Content Drawer -->
    <div class="content-drawer top-drawer" id="top-drawer">
      <span class="education-text">education</span>
      <div class="drawer-handle" id="top-drawer-handle">
        <span class="drawer-label">Technical Overview</span>
        <span class="drawer-toggle">▼</span>
      </div>
      <div class="drawer-content" id="top-drawer-content">
        <span class="education-text">education</span>
        <h2>Multi-User Interactive Isometric Environments</h2>
        <span class="education-text">education</span>
        
        <p><span class="education-text">education</span>Interactive isometric environments enable simultaneous spatial manipulation and observation by multiple participants. The underlying architecture employs client-server synchronization to maintain a consistent shared state across distributed systems. Each client renders the isometric projection locally while transmitting transformation operations to a central authority server that validates and broadcasts state changes to all connected participants.</p>
        
        <p>The coordinate system implements a discrete voxel grid where each unit represents a cubic volume in world space. Isometric transformation matrices convert these three-dimensional coordinates into screen-space positions for rendering. The grid structure facilitates efficient collision detection through spatial hashing algorithms, enabling rapid queries to determine occupancy and adjacency relationships between voxels.</p>
        
        <p>Entity representation employs a component-based architecture where autonomous agents possess behavior trees governing movement patterns and interaction logic. Pathfinding algorithms utilize the A* search algorithm adapted to the discrete grid topology, computing optimal traversal routes while avoiding obstacles and respecting elevation constraints. Navigation meshes generated from the voxel grid provide efficient spatial queries for agent locomotion.</p>
        
        <p>Input handling translates screen-space interactions into world-space operations through inverse isometric projection. Ray-casting techniques determine the precise grid coordinates targeted by cursor position, accounting for elevation and occlusion. The system supports additive and subtractive operations on the voxel grid, with validation logic preventing invalid configurations and maintaining structural integrity constraints.</p>
      </div>
    </div>

    <div class="main-content-area">
      <span class="education-text">education mathematics calculus algebra geometry topology 
      differential equations partial derivatives integrals summations products limits 
      convergence divergence series sequences functions mappings transformations 
      linear algebra matrices vectors tensors eigenvalues eigenvectors determinants 
      complex analysis real analysis functional analysis measure theory 
      probability statistics distributions random variables expectations variances 
      number theory primes composites modular arithmetic cryptography 
      graph theory networks trees paths cycles degrees connectivity 
      combinatorics permutations combinations binomial coefficients 
      discrete mathematics logic sets relations predicates quantifiers 
      optimization convex analysis gradient descent lagrange multipliers 
      numerical methods approximation interpolation finite differences 
      computational complexity algorithms data structures sorting searching 
      physics mechanics dynamics kinematics forces energy momentum 
      electromagnetism fields waves optics quantum classical 
      thermodynamics entropy heat temperature pressure volume 
      chemistry reactions stoichiometry equilibrium kinetics 
      biology genetics evolution ecology population dynamics 
      economics game theory Nash equilibrium optimization decision theory
      π=3.14159265358979323846 e=2.71828182845904523536 φ=1.61803398874989484820
      √2=1.41421356237309504880 √3=1.73205080756887729352 √5=2.23606797749978969640</span>
      <div id="game-container">
        <span class="education-text">education mathematics symbols numbers equations formulas theorems proofs lemmas corollaries 
        axioms postulates definitions properties relations operations transformations 
        0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 
        + - × ÷ = ≠ < > ≤ ≥ ≈ ∼ ≡ ≅ ∝ ∞ √ ∛ ∜ ∫ ∬ ∭ ∮ ∯ ∰ ∑ ∏ ∐ 
        ∂ ∇ Δ ∆ ⊕ ⊗ ⊙ ⊘ ⊚ ⊛ ∪ ∩ ⊂ ⊃ ⊆ ⊇ ∈ ∉ ∅ ∀ ∃ ∄ ∧ ∨ ¬ 
        α β γ δ ε ζ η θ ι κ λ μ ν ξ ο π ρ σ τ υ φ χ ψ ω 
        Α Β Γ Δ Ε Ζ Η Θ Ι Κ Λ Μ Ν Ξ Ο Π Ρ Σ Τ Υ Φ Χ Ψ Ω 
        ℵ ℶ ℷ ℸ ℝ ℂ ℕ ℤ ℚ ℙ ℍ ℏ ℓ ℮ ⅇ ⅈ ⅉ</span>
        <canvas id="game-canvas"></canvas>
        <span class="education-text">education</span>

      <div id="controls-overlay">
        <span class="education-text">education</span>
        <div class="control-hint">
          <span class="education-text">education</span>
          <span class="key">WASD</span> Move & Climb
          <span class="key">Q/E</span> Rotate
          <span class="key">Space</span> Place Block
          <span class="key">X</span> Remove Block
          <span class="key">1-8</span> Colors
          <span class="stomp-hint">Stomp NPCs from above!</span>
        </div>
      </div>
      <div id="player-info">
        <span class="education-text">education</span>
        <div id="player-count">Participants: 0</div>
        <span class="education-text">education</span>
        <div id="position-info">Position: (0, 0)</div>
        <span class="education-text">education</span>
        <div id="game-mode-info">Mode: Loading...</div>
        <div id="classic-stomp-hud" style="display:none;">Score: 0 | Time: --:--</div>
        <div id="koth-hud" style="display:none;">Score: 0 | Time: --:-- | Hill: --</div>
      </div>
      <span class="education-text">education</span>
      <button id="leave-room-btn" class="leave-btn">Leave Session</button>
      <span class="education-text">education</span>
      <button id="players-btn" class="players-btn" style="display:none;">Participants</button>
      <span class="education-text">education</span>
      <div id="players-panel" class="players-panel" style="display:none;">
        <span class="education-text">education</span>
        <div class="players-panel-header">
          <h3>Participants</h3>
          <button id="players-panel-close" class="players-panel-close">&times;</button>
        </div>
        <div id="players-list" class="players-list"></div>
      </div>
      </div>
      <div id="chat-container">
      <span class="education-text">education</span>
      <div id="chat-header">
        <span class="education-text">education</span>
        <h2>Chat</h2>
        <span class="education-text">education</span>
        <div id="name-section">
          <input type="text" id="name-input" placeholder="Your name..." maxlength="20">
          <button id="name-btn">Set Name</button>
        </div>
      </div>
      <div id="chat-messages"><span class="education-text">education</span></div>
      <span class="education-text">education</span>
      <div id="chat-input-container">
        <span class="education-text">education</span>
        <input type="text" id="chat-input" placeholder="Type a message..." maxlength="500">
        <span class="education-text">education</span>
        <button id="send-btn">Send</button>
      </div>
      </div>
    </div>

    <!-- Bottom Content Drawer -->
    <span class="education-text">education advanced mathematics problems solutions derivations proofs 
    ∫₀^∞ e^(-x²)dx = √π/2 | ∑ₙ₌₁^∞ 1/n² = π²/6 | ∏ₙ₌₁^∞ (1-1/n²) = 1/2 
    lim(x→0) sin(x)/x = 1 | lim(n→∞) (1+1/n)ⁿ = e | lim(x→∞) (1+k/x)ˣ = eᵏ 
    d/dx[xⁿ] = nxⁿ⁻¹ | d/dx[eˣ] = eˣ | d/dx[ln(x)] = 1/x | d/dx[sin(x)] = cos(x) 
    ∫xⁿdx = xⁿ⁺¹/(n+1)+C | ∫eˣdx = eˣ+C | ∫1/x dx = ln|x|+C | ∫sin(x)dx = -cos(x)+C 
    F(x,y,z) = ∇×A | ∇·(∇×A) = 0 | ∇×(∇φ) = 0 | ∇²φ = ∇·(∇φ) 
    Euler: V - E + F = 2 | Fermat: xⁿ+yⁿ=zⁿ no solutions n>2 | Pythagorean: a²+b²=c² 
    Fibonacci: Fₙ = Fₙ₋₁ + Fₙ₋₂ | Golden ratio: φ = (1+√5)/2 | Lucas: Lₙ = Fₙ₋₁ + Fₙ₊₁ 
    Catalan: Cₙ = (2n)!/(n!(n+1)!) | Bell: Bₙ₊₁ = ∑ₖ₌₀ⁿ C(n,k)Bₖ | Stirling: n! ≈ √(2πn)(n/e)ⁿ 
    Taylor series: f(x) = ∑ₙ₌₀^∞ fⁿ(a)(x-a)ⁿ/n! | Maclaurin: f(x) = ∑ₙ₌₀^∞ fⁿ(0)xⁿ/n! 
    Fourier: f(x) = a₀/2 + ∑(aₙcos(nx) + bₙsin(nx)) | Laplace: ℒ{f(t)} = ∫₀^∞ e⁻ˢᵗf(t)dt 
    23456789 98765432 13579 24680 314159 271828 161803 141421 173205 
    sin²θ + cos²θ = 1 | tan²θ + 1 = sec²θ | 1 + cot²θ = csc²θ | sin(2θ) = 2sinθcosθ 
    cos(2θ) = cos²θ - sin²θ | tan(2θ) = 2tanθ/(1-tan²θ) | sin(α±β) = sinαcosβ ± cosαsinβ</span>
    <div class="content-drawer bottom-drawer" id="bottom-drawer">
      <span class="education-text">education</span>
      <div class="drawer-handle" id="bottom-drawer-handle">
        <span class="education-text">education</span>
        <span class="drawer-toggle">▲</span>
        <span class="drawer-label">Implementation Architecture</span>
      </div>
      <div class="drawer-content" id="bottom-drawer-content">
        <span class="education-text">education</span>
        <h2>WebSocket Protocol and State Synchronization</h2>
        <span class="education-text">education</span>
        
        <p><span class="education-text">education</span>The networking layer utilizes WebSocket connections to establish persistent bidirectional communication channels between clients and the simulation server. Message serialization employs JSON encoding for state updates, with delta compression minimizing bandwidth requirements by transmitting only changed properties rather than complete entity snapshots. Protocol buffers or MessagePack could provide more efficient binary serialization for production deployments requiring reduced latency and bandwidth utilization.</p>
        
        <p>Temporal synchronization addresses the inherent latency in network communication through predictive algorithms and reconciliation strategies. Client-side prediction immediately applies local operations to the rendered state, providing responsive feedback to user input. When authoritative server updates arrive, the client performs reconciliation by comparing predicted state with server state, applying corrections only when discrepancies exceed defined tolerance thresholds. This approach balances responsiveness with consistency, minimizing perceptible artifacts from network delay.</p>
        
        <p>Entity interpolation smooths the visual presentation of remote participants and autonomous agents by computing intermediate positions between discrete network updates. Linear interpolation provides adequate results for constant-velocity motion, while cubic spline interpolation produces smoother trajectories for entities exhibiting acceleration. The interpolation buffer maintains a small temporal offset, ensuring sufficient data points exist to compute smooth motion paths even when network latency fluctuates.</p>
        
        <p>Load distribution and scalability considerations influence architectural decisions for systems supporting substantial concurrent participation. Horizontal scaling partitions the simulation space across multiple server instances, with each instance managing a distinct spatial region. Dynamic load balancing migrates regions between servers based on participant density and computational load. Distributed state stores or message brokers coordinate cross-region interactions when participants near region boundaries, maintaining consistency across the partitioned architecture.</p>
      </div>
      <span class="education-text">education</span>
    </div>
    <span class="education-text">education</span>
  </div>
  <span class="education-text">education</span>
  <script>
    // Drawer toggle functionality
    document.addEventListener('DOMContentLoaded', () => {
      const topDrawerHandle = document.getElementById('top-drawer-handle');
      const topDrawer = document.getElementById('top-drawer');
      const bottomDrawerHandle = document.getElementById('bottom-drawer-handle');
      const bottomDrawer = document.getElementById('bottom-drawer');

      topDrawerHandle.addEventListener('click', () => {
        topDrawer.classList.toggle('open');
      });

      bottomDrawerHandle.addEventListener('click', () => {
        bottomDrawer.classList.toggle('open');
      });
    });
  </script>
  <script src="config.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="supabaseClient.js"></script>
  <script src="game.js"></script>
</body>
</html>
