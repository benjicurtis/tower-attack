<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tower Attack - Lobby</title>
  <link rel="stylesheet" href="lobby.css">
</head>
<body>
  <div id="lobby-container">
    <div class="lobby-header">
      <h1 class="game-title">üè∞ Tower Attack</h1>
      <p class="game-subtitle">Pick a name, pick a color, and play.</p>
    </div>

    <!-- Player Info Section -->
    <div class="player-setup">
      <div class="player-name-section">
        <label for="player-name">Your Name:</label>
        <input type="text" id="player-name" placeholder="Enter your name..." maxlength="20">
      </div>
      <div class="player-color-section">
        <label>Choose Color:</label>
        <div class="hex-color-editor" aria-label="Custom hex color">
          <div class="hex-color-preview" id="hex-color-preview" title="Selected color"></div>
          <div class="hex-color-fields">
            <span class="hex-prefix">#</span>
            <div class="hex-byte">
              <span class="hex-byte-label">R</span>
              <input id="hex-r" type="text" inputmode="text" maxlength="2" placeholder="FF" autocomplete="off" autocapitalize="characters" spellcheck="false" aria-label="Red hex byte">
            </div>
            <div class="hex-byte">
              <span class="hex-byte-label">G</span>
              <input id="hex-g" type="text" inputmode="text" maxlength="2" placeholder="FF" autocomplete="off" autocapitalize="characters" spellcheck="false" aria-label="Green hex byte">
            </div>
            <div class="hex-byte">
              <span class="hex-byte-label">B</span>
              <input id="hex-b" type="text" inputmode="text" maxlength="2" placeholder="FF" autocomplete="off" autocapitalize="characters" spellcheck="false" aria-label="Blue hex byte">
            </div>
          </div>
          <div class="hex-color-help" id="hex-color-help">Enter hex bytes (00‚ÄìFF).</div>
        </div>
        <div class="color-picker" id="color-picker">
          <!-- Colors will be generated by JS -->
        </div>
      </div>
    </div>

    <!-- Game Mode Section -->
    <div class="game-modes-section">
      <h2>Game Mode</h2>
      <div class="game-modes-grid">
        
        <!-- Free Build Mode -->
        <div class="game-mode-card" data-mode="freeplay">
          <div class="mode-icon">üèóÔ∏è</div>
          <h3>Free Build</h3>
          <p>Build freely and explore. No NPCs.</p>
          <div class="mode-stats">
            <span class="player-count">0 players</span>
            <span class="mode-tag tag-casual">Casual</span>
          </div>
        </div>

        <!-- Classic Stomp Mode -->
        <div class="game-mode-card" data-mode="classic-stomp">
          <div class="mode-icon">üëü</div>
          <h3>Classic Stomp</h3>
          <p>NPCs enabled. Stomp them from above!</p>
          <div class="mode-stats">
            <span class="player-count">0 players</span>
            <span class="mode-tag tag-action">Action</span>
          </div>
        </div>

        <!-- King of the Hill Mode -->
        <div class="game-mode-card" data-mode="king-of-the-hill">
          <div class="mode-icon">üëë</div>
          <h3>King of the Hill</h3>
          <p>Hold the hill to earn points. Most points wins.</p>
          <div class="mode-stats">
            <span class="player-count">0 players</span>
            <span class="mode-tag tag-competitive">Competitive</span>
          </div>
        </div>

        <!-- Infection Mode -->
        <div class="game-mode-card" data-mode="infection">
          <div class="mode-icon">ü¶†</div>
          <h3>Infection</h3>
          <p>One player starts infected. Touch a carrier to spread it.</p>
          <div class="mode-stats">
            <span class="player-count">0 players</span>
            <span class="mode-tag tag-infection">Infection</span>
          </div>
        </div>

      </div>
    </div>

    <!-- Active Rooms Section -->
    <div class="rooms-section">
      <h2>Active Rooms</h2>
      <div class="rooms-list" id="rooms-list">
        <div class="no-rooms">No active rooms. Create one to start playing!</div>
      </div>
    </div>

    <!-- Selected Mode Info -->
    <div class="selected-mode-panel" id="selected-mode-panel" style="display: none;">
      <div class="selected-mode-content">
        <div class="selected-mode-text">
          <h3 id="selected-mode-title"></h3>
          <p id="selected-mode-description"></p>
        </div>

        <div class="selected-mode-controls" id="selected-mode-controls" style="display:none;">
          <div class="weapon-row" id="stomp-duration-row" style="display:none;">
            <label for="stomp-duration-select">Match length</label>
            <select id="stomp-duration-select">
              <option value="1">1 min</option>
              <option value="2">2 min</option>
              <option value="3" selected>3 min</option>
              <option value="4">4 min</option>
              <option value="5">5 min</option>
            </select>
          </div>

          <div class="weapon-row" id="koth-duration-row" style="display:none;">
            <label for="koth-duration-select">Match length</label>
            <select id="koth-duration-select">
              <option value="1">1 min</option>
              <option value="2">2 min</option>
              <option value="3" selected>3 min</option>
              <option value="4">4 min</option>
              <option value="5">5 min</option>
            </select>
          </div>
        </div>

        <div class="action-buttons">
          <button class="btn btn-primary" id="create-room-btn">Create Room</button>
          <button class="btn btn-secondary" id="quick-join-btn">Quick Join</button>
          <button class="btn btn-cancel" id="cancel-btn">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <script src="config.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="supabaseClient.js"></script>
  <script src="lobby.js"></script>
</body>
</html>
